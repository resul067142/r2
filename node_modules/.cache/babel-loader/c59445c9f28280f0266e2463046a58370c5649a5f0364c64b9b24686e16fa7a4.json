{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport getUser from '../composables/getUser';\nimport { addDoc, collection, serverTimestamp, onSnapshot, query, where, deleteDoc, doc } from 'firebase/firestore';\nimport { db } from '../firebase/config';\nexport default {\n  setup() {\n    const {\n      kullanici\n    } = getUser();\n    const gonderi = ref('');\n    const gonderiler = ref([]);\n    const handleClick = async () => {\n      if (kullanici.value) {\n        await addDoc(collection(db, 'gonderiler'), {\n          gKullaniciAd: kullanici.value.displayName,\n          gonderi: gonderi.value,\n          tarih: serverTimestamp(),\n          yorumlar: []\n        });\n        gonderi.value = '';\n      }\n    };\n    const handleDelete = async id => {\n      //console.log(id);\n\n      await deleteDoc(doc(db, \"gonderiler\", id));\n    };\n    onMounted(() => {\n      const q = query(collection(db, \"gonderiler\"), where(\"gKullaniciAd\", \"==\", kullanici.value.displayName));\n      onSnapshot(q, querySnapshot => {\n        const dizi = [];\n        querySnapshot.forEach(doc => {\n          dizi.push({\n            ...doc.data(),\n            id: doc.id\n          });\n        });\n        gonderiler.value = dizi;\n      });\n    });\n    return {\n      handleClick,\n      gonderi,\n      gonderiler,\n      handleDelete\n    };\n  }\n};","map":{"version":3,"mappings":";AAuCA,SAAQA,GAAG,EAAEC,SAAS,QAAO,KAAI;AACjC,OAAOC,OAAM,MAAO,wBAAuB;AAC3C,SAAQC,MAAM,EAAEC,UAAU,EAACC,eAAe,EAAEC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,SAAS,EAAEC,GAAG,QAAO,oBAAmB;AAC9G,SAAQC,EAAE,QAAO,oBAAmB;AAEpC,eAAe;EACbC,KAAK,GAAG;IAEN,MAAM;MAACC;IAAS,IAAIX,OAAO,EAAE;IAC7B,MAAMY,OAAM,GAAId,GAAG,CAAC,EAAE;IACtB,MAAMe,UAAS,GAAIf,GAAG,CAAC,EAAE;IAEzB,MAAMgB,WAAU,GAAI,YAAY;MAE9B,IAAIH,SAAS,CAACI,KAAK,EAAE;QAEnB,MAAMd,MAAM,CAACC,UAAU,CAACO,EAAE,EAAE,YAAY,CAAC,EAAE;UACzCO,YAAY,EAAEL,SAAS,CAACI,KAAK,CAACE,WAAW;UACzCL,OAAO,EAAEA,OAAO,CAACG,KAAK;UACtBG,KAAK,EAAEf,eAAe,EAAE;UACxBgB,QAAQ,EAAE;QACZ,CAAC;QACDP,OAAO,CAACG,KAAI,GAAI,EAAC;MACnB;IACF;IAEA,MAAMK,YAAY,GAAC,MAAOC,EAAE,IAAG;MAC7B;;MAEA,MAAMd,SAAS,CAACC,GAAG,CAACC,EAAE,EAAE,YAAY,EAAEY,EAAE,CAAC;IAC3C;IAEMtB,SAAS,CAAC,MAAM;MACd,MAAMuB,IAAIjB,KAAK,CAACH,UAAU,CAACO,EAAE,EAAE,YAAY,CAAC,EAAEH,KAAK,CAAC,cAAc,EAAE,IAAI,EAAEK,SAAS,CAACI,KAAK,CAACE,WAAW,CAAC,CAAC;MAEvGb,UAAU,CAACkB,CAAC,EAAEC,aAAY,IAAK;QAC7B,MAAMC,IAAG,GAAI,EAAE;QACfD,aAAa,CAACE,OAAO,CAAEjB,GAAG,IAAK;UAC7BgB,IAAI,CAACE,IAAI,CAAC;YAAC,GAAGlB,GAAG,CAACmB,IAAI,EAAE;YAAEN,EAAE,EAAEb,GAAG,CAACa;UAAE,CAAC,CAAC;QACxC,CAAC;QACDR,UAAU,CAACE,KAAI,GAAIS,IAAI;MACzB,CAAC;IACH,CAAC;IAED,OAAO;MAACV,WAAW;MAAEF,OAAO;MAAEC,UAAU;MAAEO;IAAY;EACxD;AACA","names":["ref","onMounted","getUser","addDoc","collection","serverTimestamp","onSnapshot","query","where","deleteDoc","doc","db","setup","kullanici","gonderi","gonderiler","handleClick","value","gKullaniciAd","displayName","tarih","yorumlar","handleDelete","id","q","querySnapshot","dizi","forEach","push","data"],"sourceRoot":"","sources":["/home/ubuntu-1/Masaüstü/vue3-v-4/r2/src/views/Share.vue"],"sourcesContent":["<template>\n\n  <div class=\"container\">\n    <div class=\"mb-3\">\n      <label for=\"exampleFormControlInput1\" class=\"form-label\">Düşüncelerini Yaz</label>\n      <input type=\"text\" class=\"form-control\" id=\"exampleFormControlInput1\"\n             placeholder=\"Bugün çok mutluyum\" v-model=\"gonderi\">\n    </div>\n    <div class=\"mb-3 text-center\">\n      <button @click=\"handleClick\" type=\"button\" class=\"btn btn-dark\">Gönder</button>\n    </div>\n    <hr />\n    <div class=\"mb-3\">\n      <ol class=\"list-group list-group-numbered\">\n        <li class=\"list-group-item d-flex justify-content-between align-items-start\">\n          <div class=\"ms-2 me-auto\">\n            <div class=\"fw-bold\">Birinci entry</div>\n            Tarih\n          </div>\n          <span class=\"badge bg-primary rounded-pill\">Yorum Sayısı</span>\n        </li>\n        <li v-for=\"g in gonderiler\" :key=\"g.id\" class=\"...\">\n          <div class=\"ms-2 me-auto\">\n            <div class=\"fw-bold\">{{g.gonderi}}</div>\n            {{g.tarih}}\n          </div>\n          <span class=\"badge bg-primary rounded-pill\">{{g.yorumlar.length}}</span>\n          <span @click=\"handleDelete(g.id)\" class=\"badge bg-danger mx-2\"><i class=\"bi bi-x\"></i></span>\n\n        </li>\n\n      </ol>\n    </div>\n\n  </div>\n\n</template>\n\n<script>\nimport {ref, onMounted} from 'vue'\nimport getUser from '../composables/getUser'\nimport {addDoc, collection,serverTimestamp, onSnapshot, query, where, deleteDoc, doc} from 'firebase/firestore'\nimport {db} from '../firebase/config'\n\nexport default {\n  setup() {\n\n    const {kullanici} = getUser();\n    const gonderi = ref('')\n    const gonderiler = ref([])\n\n    const handleClick = async () => {\n\n      if (kullanici.value) {\n\n        await addDoc(collection(db, 'gonderiler'), {\n          gKullaniciAd: kullanici.value.displayName,\n          gonderi: gonderi.value,\n          tarih: serverTimestamp(),\n          yorumlar: []\n        })\n        gonderi.value = ''\n      }\n    }\n\n    const handleDelete=async (id)=>{\n      //console.log(id);\n\n      await deleteDoc(doc(db, \"gonderiler\", id))\n    }\n\n          onMounted(() => {\n            const q = query(collection(db, \"gonderiler\"), where(\"gKullaniciAd\", \"==\", kullanici.value.displayName));\n\n            onSnapshot(q, querySnapshot => {\n              const dizi = [];\n              querySnapshot.forEach((doc) => {\n                dizi.push({...doc.data(), id: doc.id});\n              })\n              gonderiler.value = dizi;\n            })\n          })\n\n          return {handleClick, gonderi, gonderiler, handleDelete}\n        },\n        }\n</script>\n\n<style scoped>\n.container{\n  max-width: 600px;\n  padding-top: 50px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}